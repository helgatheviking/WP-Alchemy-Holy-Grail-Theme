/*! Featured Item Metabox 1.2.3 2014-11-16 01:42 */
!function(a){var b={textareas:{},tmc_settings:{},tmc_defaults:{theme:"modern",menubar:!1,wpautop:!0,indent:!1,toolbar1:"bold,italic,underline,blockquote,strikethrough,bullist,numlist,alignleft,aligncenter,alignright,undo,redo,link,unlink,fullscreen",plugins:"fullscreen,image,wordpress,wpeditimage,wplink"},qt_settings:{},qt_defaults:{buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,more,close,fullscreen"},runTinyMCE:function(){var c="object"==typeof tinyMCEPreInit&&"mceInit"in tinyMCEPreInit&&"content"in tinyMCEPreInit.mceInit?tinyMCEPreInit.mceInit.content:b.tmc_defaults;b.qt_settings="object"==typeof tinyMCEPreInit&&"qtInit"in tinyMCEPreInit&&"content"in tinyMCEPreInit.qtInit?tinyMCEPreInit.qtInit.content:b.qt_defaults;var d={setup:function(a){a.on("change",function(){b.changeName(a)})}};b.tmc_settings=a.extend({},c,d),b.textareas=a("div.wpa_group:not(.tocopy) textarea.wp-editor-area"),b.textareas.each(function(c){var d=a(this).attr("id");d||(d="mceEditor-"+c,a(this).attr("id",d));var e=a.extend({},b.tmc_settings,{selector:"#"+d}),f=a.extend({},b.qt_settings,{id:d});"object"==typeof tinyMCEPreInit&&(tinyMCEPreInit.mceInit[d]=e,tinyMCEPreInit.qtInit[d]=f),quicktags(f),tinymce.init(e),a(this).closest(".customEditor").find("a.insert-media").data("editor",d)})},newTinyMCE:function(c){count=b.textareas.length,id="mceEditor-"+count,$new_textarea=c.find("textarea.wp-editor-area").attr("id",id),b.textareas.push($new_textarea);var d=a.extend({},b.tmc_settings,{selector:"#"+id}),e=a.extend({},b.qt_settings,{id:id});"object"==typeof tinyMCEPreInit&&(tinyMCEPreInit.mceInit[id]=d,tinyMCEPreInit.qtInit[id]=e);try{quicktags(e),QTags._buttonsInit(),tinyMCE.init(d)}catch(f){}},sortable:function(){var b;a(".wpa_loop").sortable({handle:"h3.handle",axis:"y",opacity:.5,tolerance:"pointer",start:function(c,d){b=a(d.item).find("textarea.wp-editor-area").attr("id");try{tinyMCE.execCommand("mceRemoveEditor",!1,b)}catch(e){}},stop:function(){try{tinyMCE.execCommand("mceAddEditor",!1,b)}catch(a){}}})},toggleGroups:function(){a(".wpa_loop").on("click",".toggle",function(){$group=a(this).parents(".wpa_group"),console.log($group),$toggle=$group.find(".toggle_state"),console.log($toggle),$inside=$group.find(".group-inside"),console.log($inside),$inside.toggle("slow",function(){$toggle.prop("checked",!$toggle.prop("checked")),$group.find(".group-wrap").toggleClass("closed",$toggle.prop("checked"))})})},changeName:function(b){a("#"+b.id).closest(".wpa_group").find(".handle").html(b.getContent({format:"text"}).substring(0,30))},groupName:function(){a(".wpa_loop").on("change","textarea.wp-editor-area",function(){$group=a(this).parents(".wpa_group"),$group.find(".handle").html(a(this).val().substring(0,30))})},switchEditors:function(){a(".wpa_loop").on("click",".wp-switch-editor",function(){$wrapper=a(this).closest(".wp-editor-wrap"),$wrapper.toggleClass("html-active tmce-active"),id=$wrapper.find("textarea.wp-editor-area").attr("id"),mode=a(this).data("mode"),switchEditors.go(id,mode)})}};a(document).ready(function(){b.runTinyMCE(),b.sortable(),b.toggleGroups(),b.groupName(),b.switchEditors(),a.wpalchemy||(a.wpalchemy=a("<div/>").attr("id","wpalchemy").appendTo("body")),a(document.body).on("wpa_copy",a.wpalchemy,function(a,c){b.newTinyMCE(c)})})}(jQuery);